package tui


BoxType :: enum u8 {
    None,

    Single,
    SingleHeavy,
    SingleCurve,
    Double,

    Dash2,
    Dash2Heavy,
    Dash3,
    Dash3Heavy,
    Dash4,
    Dash4Heavy,
}

BoxTypeMask :: bit_set[BoxType]

BoxCharacter :: struct {
    character : rune,
    masks : [4]BoxTypeMask,
    type : BoxTypeMask,
}

// TODO: some connectors obviously don't work (there's no horizontal line Single-Double), gotta come up with something

// https://en.wikipedia.org/wiki/Box-drawing_characters
// NORTH    EAST    SOUTH    WEST
BoxTypeMask_Light : BoxTypeMask : { .Single, .SingleCurve, .Dash2, .Dash3, .Dash4 }
BoxTypeMask_Heavy : BoxTypeMask : { .SingleHeavy, .Dash2Heavy, .Dash3Heavy, .Dash4Heavy }
BoxTypeMask_1 : BoxTypeMask : { .Single, .SingleHeavy, .SingleCurve, .Dash2, .Dash2Heavy, .Dash3, .Dash3Heavy, .Dash4, .Dash4Heavy }
BoxTypeMask_2 : BoxTypeMask : { .Double }
BoxCharacters : []BoxCharacter = {
    { '─', { { .None }, BoxTypeMask_Light, { .None }, BoxTypeMask_Light }, { .Single, .SingleCurve } },
    { '━', { { .None }, BoxTypeMask_Heavy, { .None }, BoxTypeMask_Heavy }, { .SingleHeavy } },
    { '│', { BoxTypeMask_Light, { .None }, BoxTypeMask_Light, { .None } }, { .Single, .SingleCurve } },
    { '┃', { BoxTypeMask_Heavy, { .None }, BoxTypeMask_Heavy, { .None } }, { .SingleHeavy } },
    { '┄', { { .None }, BoxTypeMask_Light, { .None }, BoxTypeMask_Light }, { .Dash3 } },
    { '┅', { { .None }, BoxTypeMask_Heavy, { .None }, BoxTypeMask_Heavy }, { .Dash3Heavy } },
    { '┆', { BoxTypeMask_Light, { .None }, BoxTypeMask_Heavy, { .None } }, { .Dash3 } },
    { '┇', { BoxTypeMask_Heavy, { .None }, BoxTypeMask_Heavy, { .None } }, { .Dash3Heavy } },
    { '┈', { { .None }, BoxTypeMask_Light, { .None }, BoxTypeMask_Light }, { .Dash4 } },
    { '┉', { { .None }, BoxTypeMask_Heavy, { .None }, BoxTypeMask_Heavy }, { .Dash4Heavy } },
    { '┊', { BoxTypeMask_Light, { .None }, BoxTypeMask_Light, { .None } }, { .Dash4 } },
    { '┋', { BoxTypeMask_Heavy, { .None }, BoxTypeMask_Heavy, { .None } }, { .Dash4Heavy } },
    { '┌', { { .None }, BoxTypeMask_Light, BoxTypeMask_Light, { .None } }, { .Single } },
    { '┍', { { .None }, BoxTypeMask_Heavy, BoxTypeMask_Light, { .None } }, { .Single, .SingleHeavy } },
    { '┎', { { .None }, BoxTypeMask_Light, BoxTypeMask_Heavy, { .None } }, { .Single, .SingleHeavy } },
    { '┏', { { .None }, BoxTypeMask_Heavy, BoxTypeMask_Heavy, { .None } }, { .SingleHeavy } },
    { '┐', { { .None }, { .None }, BoxTypeMask_Light, BoxTypeMask_Light }, { .Single } },
    { '┑', { { .None }, { .None }, BoxTypeMask_Light, BoxTypeMask_Heavy }, { .Single, .SingleHeavy } },
    { '┒', { { .None }, { .None }, BoxTypeMask_Heavy, BoxTypeMask_Light }, { .Single, .SingleHeavy } },
    { '┓', { { .None }, { .None }, BoxTypeMask_Heavy, BoxTypeMask_Heavy }, { .SingleHeavy } },
    { '└', { BoxTypeMask_Light, BoxTypeMask_Light, { .None }, { .None } }, { .Single } },
    { '┕', { BoxTypeMask_Light, BoxTypeMask_Heavy, { .None }, { .None } }, { .Single, .SingleHeavy }},
    { '┖', { BoxTypeMask_Heavy, BoxTypeMask_Light, { .None }, { .None } }, { .Single, .SingleHeavy }},
    { '┗', { BoxTypeMask_Heavy, BoxTypeMask_Heavy, { .None }, { .None } }, { .SingleHeavy } },
    { '┘', { BoxTypeMask_Light, { .None }, { .None }, BoxTypeMask_Light }, { .Single } },
    { '┙', { BoxTypeMask_Light, { .None }, { .None }, BoxTypeMask_Heavy }, { .Single, .SingleHeavy } },
    { '┚', { BoxTypeMask_Heavy, { .None }, { .None }, BoxTypeMask_Light }, { .Single, .SingleHeavy } },
    { '┛', { BoxTypeMask_Heavy, { .None }, { .None }, BoxTypeMask_Heavy }, { .SingleHeavy } },
    { '├', { BoxTypeMask_Light, BoxTypeMask_Light, BoxTypeMask_Light, { .None } }, { .Single } },
    { '┝', { BoxTypeMask_Light, BoxTypeMask_Heavy, BoxTypeMask_Light, { .None } }, { .Single, .SingleHeavy } },
    { '┞', { BoxTypeMask_Heavy, BoxTypeMask_Light, BoxTypeMask_Light, { .None } }, { .Single, .SingleHeavy } },
    { '┟', { BoxTypeMask_Light, BoxTypeMask_Light, BoxTypeMask_Heavy, { .None } }, { .Single, .SingleHeavy } },
    { '┠', { BoxTypeMask_Heavy, BoxTypeMask_Light, BoxTypeMask_Heavy, { .None } }, { .Single, .SingleHeavy } },
    { '┡', { BoxTypeMask_Heavy, BoxTypeMask_Heavy, BoxTypeMask_Light, { .None } }, { .Single, .SingleHeavy } },
    { '┢', { BoxTypeMask_Light, BoxTypeMask_Heavy, BoxTypeMask_Heavy, { .None } }, { .Single, .SingleHeavy } },
    { '┣', { BoxTypeMask_Heavy, BoxTypeMask_Heavy, BoxTypeMask_Heavy, { .None } }, { .SingleHeavy } },

    { '┤', { BoxTypeMask_Light, { .None }, BoxTypeMask_Light, BoxTypeMask_Light }, { .Single } },
    { '┥', { BoxTypeMask_Light, { .None }, BoxTypeMask_Light, BoxTypeMask_Heavy }, { .Single, .SingleHeavy } },
    { '┦', { BoxTypeMask_Heavy, { .None }, BoxTypeMask_Light, BoxTypeMask_Light }, { .Single, .SingleHeavy } },
    { '┧', { BoxTypeMask_Light, { .None }, BoxTypeMask_Heavy, BoxTypeMask_Light }, { .Single, .SingleHeavy } },
    { '┨', { BoxTypeMask_Heavy, { .None }, BoxTypeMask_Heavy, BoxTypeMask_Light }, { .Single, .SingleHeavy } },
    { '┩', { BoxTypeMask_Heavy, { .None }, BoxTypeMask_Heavy, BoxTypeMask_Light }, { .Single, .SingleHeavy } },
    { '┪', { BoxTypeMask_Light, { .None }, BoxTypeMask_Heavy, BoxTypeMask_Heavy }, { .Single, .SingleHeavy } },
    { '┫', { BoxTypeMask_Heavy, { .None }, BoxTypeMask_Heavy, BoxTypeMask_Heavy }, { .SingleHeavy } },

    { '┬', { { .None }, BoxTypeMask_Light, BoxTypeMask_Light, BoxTypeMask_Light }, { .Single } },
    { '┭', { { .None }, BoxTypeMask_Light, BoxTypeMask_Light, BoxTypeMask_Heavy }, { .Single, .SingleHeavy } },
    { '┮', { { .None }, BoxTypeMask_Heavy, BoxTypeMask_Light, BoxTypeMask_Light }, { .Single, .SingleHeavy } },
    { '┯', { { .None }, BoxTypeMask_Heavy, BoxTypeMask_Light, BoxTypeMask_Heavy }, { .Single, .SingleHeavy } },
    { '┰', { { .None }, BoxTypeMask_Light, BoxTypeMask_Heavy, BoxTypeMask_Light }, { .Single, .SingleHeavy } },
    { '┱', { { .None }, BoxTypeMask_Light, BoxTypeMask_Heavy, BoxTypeMask_Heavy }, { .Single, .SingleHeavy } },
    { '┲', { { .None }, BoxTypeMask_Heavy, BoxTypeMask_Heavy, BoxTypeMask_Light }, { .Single, .SingleHeavy } },
    { '┳', { { .None }, BoxTypeMask_Heavy, BoxTypeMask_Heavy, BoxTypeMask_Heavy }, { .SingleHeavy } },

    { '┴', { BoxTypeMask_Light, BoxTypeMask_Light, { .None }, BoxTypeMask_Light }, { .Single } },
    { '┵', { BoxTypeMask_Light, BoxTypeMask_Light, { .None }, BoxTypeMask_Heavy }, { .Single, .SingleHeavy } },
    { '┶', { BoxTypeMask_Light, BoxTypeMask_Heavy, { .None }, BoxTypeMask_Light }, { .Single, .SingleHeavy } },
    { '┷', { BoxTypeMask_Light, BoxTypeMask_Heavy, { .None }, BoxTypeMask_Heavy }, { .Single, .SingleHeavy } },
    { '┸', { BoxTypeMask_Heavy, BoxTypeMask_Light, { .None }, BoxTypeMask_Light }, { .Single, .SingleHeavy } },
    { '┹', { BoxTypeMask_Heavy, BoxTypeMask_Light, { .None }, BoxTypeMask_Heavy }, { .Single, .SingleHeavy } },
    { '┺', { BoxTypeMask_Heavy, BoxTypeMask_Heavy, { .None }, BoxTypeMask_Light }, { .Single, .SingleHeavy } },
    { '┻', { BoxTypeMask_Heavy, BoxTypeMask_Heavy, { .None }, BoxTypeMask_Heavy }, { .SingleHeavy } },

    { '┼', { BoxTypeMask_Light, BoxTypeMask_Light, BoxTypeMask_Light, BoxTypeMask_Light }, { .Single } },
    { '┽', { BoxTypeMask_Light, BoxTypeMask_Light, BoxTypeMask_Light, BoxTypeMask_Heavy }, { .Single, .SingleHeavy } },
    { '┾', { BoxTypeMask_Light, BoxTypeMask_Heavy, BoxTypeMask_Light, BoxTypeMask_Light }, { .Single, .SingleHeavy } },
    { '┿', { BoxTypeMask_Light, BoxTypeMask_Heavy, BoxTypeMask_Light, BoxTypeMask_Heavy }, { .Single, .SingleHeavy } },
    { '╀', { BoxTypeMask_Heavy, BoxTypeMask_Light, BoxTypeMask_Light, BoxTypeMask_Light }, { .Single, .SingleHeavy } },
    { '╁', { BoxTypeMask_Light, BoxTypeMask_Light, BoxTypeMask_Heavy, BoxTypeMask_Light }, { .Single, .SingleHeavy } },
    { '╂', { BoxTypeMask_Heavy, BoxTypeMask_Light, BoxTypeMask_Heavy, BoxTypeMask_Light }, { .Single, .SingleHeavy } },
    { '╃', { BoxTypeMask_Heavy, BoxTypeMask_Light, BoxTypeMask_Light, BoxTypeMask_Heavy }, { .Single, .SingleHeavy } },
    { '╄', { BoxTypeMask_Heavy, BoxTypeMask_Heavy, BoxTypeMask_Light, BoxTypeMask_Light }, { .Single, .SingleHeavy } },
    { '╅', { BoxTypeMask_Light, BoxTypeMask_Light, BoxTypeMask_Heavy, BoxTypeMask_Heavy }, { .Single, .SingleHeavy } },
    { '╆', { BoxTypeMask_Light, BoxTypeMask_Heavy, BoxTypeMask_Heavy, BoxTypeMask_Light }, { .Single, .SingleHeavy } },
    { '╇', { BoxTypeMask_Heavy, BoxTypeMask_Heavy, BoxTypeMask_Light, BoxTypeMask_Heavy }, { .Single, .SingleHeavy } },
    { '╈', { BoxTypeMask_Light, BoxTypeMask_Heavy, BoxTypeMask_Heavy, BoxTypeMask_Heavy }, { .Single, .SingleHeavy } },
    { '╉', { BoxTypeMask_Heavy, BoxTypeMask_Light, BoxTypeMask_Heavy, BoxTypeMask_Heavy }, { .Single, .SingleHeavy } },
    { '╊', { BoxTypeMask_Heavy, BoxTypeMask_Heavy, BoxTypeMask_Heavy, BoxTypeMask_Light }, { .Single, .SingleHeavy } },
    { '╋', { BoxTypeMask_Heavy, BoxTypeMask_Heavy, BoxTypeMask_Heavy, BoxTypeMask_Heavy }, { .SingleHeavy } },

    { '╌', { { .None }, BoxTypeMask_Light, { .None }, BoxTypeMask_Light }, { .Dash2 } },
    { '╍', { { .None }, BoxTypeMask_Heavy, { .None }, BoxTypeMask_Heavy }, { .Dash2Heavy } },
    { '╎', { BoxTypeMask_Light, { .None }, BoxTypeMask_Light, { .None } }, { .Dash2 } },
    { '╏', { BoxTypeMask_Heavy, { .None }, BoxTypeMask_Heavy, { .None } }, { .Dash2Heavy } },

    { '═', { { .None }, BoxTypeMask_2, { .None }, BoxTypeMask_2 }, { .Double } },
    { '║', { BoxTypeMask_2, { .None }, BoxTypeMask_2, { .None } }, { .Double } },
    { '╒', { { .None }, BoxTypeMask_2, BoxTypeMask_1, { .None } }, { .Single, .SingleCurve, .Double } },
    { '╓', { { .None }, BoxTypeMask_1, BoxTypeMask_2, { .None } }, { .Single, .SingleCurve, .Double } },
    { '╔', { { .None }, BoxTypeMask_2, BoxTypeMask_2, { .None } }, { .Double } },
    { '╕', { { .None }, { .None }, BoxTypeMask_1, BoxTypeMask_2 }, { .Single, .SingleCurve, .Double } },
    { '╖', { { .None }, { .None }, BoxTypeMask_2, BoxTypeMask_1 }, { .Single, .SingleCurve, .Double } },
    { '╗', { { .None }, { .None }, BoxTypeMask_2, BoxTypeMask_2 }, { .Double } },
    { '╘', { BoxTypeMask_1, BoxTypeMask_2, { .None }, { .None } }, { .Single, .SingleCurve, .Double } },
    { '╙', { BoxTypeMask_2, BoxTypeMask_1, { .None }, { .None } }, { .Single, .SingleCurve, .Double } },
    { '╚', { BoxTypeMask_2, BoxTypeMask_2, { .None }, { .None } }, { .Double } },
    { '╛', { BoxTypeMask_1, { .None }, { .None }, BoxTypeMask_2 }, { .Single, .SingleCurve, .Double } },
    { '╜', { BoxTypeMask_2, { .None }, { .None }, BoxTypeMask_1 }, { .Single, .SingleCurve, .Double } },
    { '╝', { BoxTypeMask_2, { .None }, { .None }, BoxTypeMask_2 }, { .Double } },

    { '╞', { BoxTypeMask_1, BoxTypeMask_2, BoxTypeMask_1, { .None } }, { .Single, .SingleCurve, .Double } },
    { '╟', { BoxTypeMask_2, BoxTypeMask_1, BoxTypeMask_2, { .None } }, { .Single, .SingleCurve, .Double } },
    { '╠', { BoxTypeMask_2, BoxTypeMask_2, BoxTypeMask_2, { .None } }, { .Double } },
    { '╡', { BoxTypeMask_1, { .None }, BoxTypeMask_1, BoxTypeMask_2 }, { .Single, .SingleCurve, .Double } },
    { '╢', { BoxTypeMask_2, { .None }, BoxTypeMask_2, BoxTypeMask_1 }, { .Single, .SingleCurve, .Double } },
    { '╣', { BoxTypeMask_2, { .None }, BoxTypeMask_2, BoxTypeMask_2 }, { .Double } },
    { '╤', { { .None }, BoxTypeMask_2, BoxTypeMask_1, BoxTypeMask_2 }, { .Single, .SingleCurve, .Double } },
    { '╥', { { .None }, BoxTypeMask_1, BoxTypeMask_2, BoxTypeMask_1 }, { .Single, .SingleCurve, .Double } },
    { '╦', { { .None }, BoxTypeMask_2, BoxTypeMask_2, BoxTypeMask_2 }, { .Double } },
    { '╧', { BoxTypeMask_1, BoxTypeMask_2, { .None }, BoxTypeMask_2 }, { .Single, .SingleCurve, .Double } },
    { '╨', { BoxTypeMask_2, BoxTypeMask_1, { .None }, BoxTypeMask_1 }, { .Single, .SingleCurve, .Double } },
    { '╩', { BoxTypeMask_2, BoxTypeMask_2, { .None }, BoxTypeMask_2 }, { .Double } },
    { '╪', { BoxTypeMask_1, BoxTypeMask_2, BoxTypeMask_1, BoxTypeMask_2 }, { .Single, .SingleCurve, .Double } },
    { '╫', { BoxTypeMask_2, BoxTypeMask_1, BoxTypeMask_2, BoxTypeMask_1 }, { .Single, .SingleCurve, .Double } },
    { '╬', { BoxTypeMask_2, BoxTypeMask_2, BoxTypeMask_2, BoxTypeMask_2 }, { .Double } },

    { '╭', { { .None }, BoxTypeMask_Light, BoxTypeMask_Light, { .None } }, { .SingleCurve } },
    { '╮', { { .None }, { .None }, BoxTypeMask_Light, BoxTypeMask_Light }, { .SingleCurve } },
    { '╯', { BoxTypeMask_Light, { .None }, { .None }, BoxTypeMask_Light }, { .SingleCurve } },
    { '╰', { BoxTypeMask_Light, BoxTypeMask_Light, { .None }, { .None } }, { .SingleCurve } },

    { '╴', { { .None }, { .None }, { .None }, BoxTypeMask_Light }, { .Single, .SingleCurve } },
    { '╵', { BoxTypeMask_Light, { .None }, { .None }, { .None } }, { .Single, .SingleCurve } },
    { '╶', { { .None }, BoxTypeMask_Light, { .None }, { .None } }, { .Single, .SingleCurve } },
    { '╷', { { .None }, { .None }, BoxTypeMask_Light, { .None } }, { .Single, .SingleCurve } },
    { '╸', { { .None }, BoxTypeMask_Heavy, { .None }, { .None } }, { .SingleHeavy } },
    { '╹', { BoxTypeMask_Heavy, { .None }, { .None }, { .None } }, { .SingleHeavy } },
    { '╺', { { .None }, BoxTypeMask_Heavy, { .None }, { .None } }, { .SingleHeavy } },
    { '╻', { { .None }, { .None }, BoxTypeMask_Heavy, { .None } }, { .SingleHeavy } },
    { '╼', { { .None }, BoxTypeMask_Heavy, { .None }, BoxTypeMask_Light }, { .Single, .SingleHeavy, .SingleCurve } },
    { '╽', { BoxTypeMask_Light, { .None }, BoxTypeMask_Heavy, { .None } }, { .Single, .SingleHeavy, .SingleCurve } },
    { '╾', { { .None }, BoxTypeMask_Light, { .None }, BoxTypeMask_Heavy }, { .Single, .SingleHeavy, .SingleCurve } },
    { '╿', { BoxTypeMask_Heavy, { .None }, BoxTypeMask_Light, { .None } }, { .Single, .SingleHeavy, .SingleCurve } },
}
